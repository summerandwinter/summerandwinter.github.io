<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>用Canvas实现图片滤镜效果 | Winter`s Notes</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="canonical" href="https://summerandwinter.github.io/image-filters-by-canvas.html"><meta name="description" content="介绍一些利用Canvas实现图片滤镜效果的算法原理"><meta name="keywords" content="HTML5,JavaScript,Canvas,滤镜,图片"><meta property="og:type" content="article"><meta property="og:title" content="用Canvas实现图片滤镜效果"><meta property="og:url" content="https://summerandwinter.github.io/image-filters-by-canvas.html"><meta property="og:site_name" content="Winter`s Notes"><meta property="og:description" content="介绍一些利用Canvas实现图片滤镜效果的算法原理"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/gray.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/video.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/spread.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/comic.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/nostalgia.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/negative.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/black.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/cameo.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/casting.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/gausian.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/cleanglass.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/focus.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/bright.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/softblow.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/mist.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/oilpainting.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/sketch.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/sharp.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/threedgrid.jpg"><meta property="og:image" content="https://summerandwinter.github.io/assets/images/filter/frozen.jpg"><meta property="og:updated_time" content="2019-11-28T08:58:49.415Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="用Canvas实现图片滤镜效果"><meta name="twitter:description" content="介绍一些利用Canvas实现图片滤镜效果的算法原理"><meta name="twitter:image" content="https://summerandwinter.github.io/assets/images/filter/gray.jpg"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/summerandwinter/summerandwinter.github.io/css/gitment.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/summerandwinter/summerandwinter.github.io/css/article.css"></head></html><body><div id="container"><div id="wrap"><header id="header" class="header"><nav id="main-nav" class="main-nav"> <a class="main-nav-link" href="/">主页</a> <a class="main-nav-link" href="/archives">归档</a> <a class="main-nav-link" href="/category">分类</a> <a class="main-nav-link" href="/tag">标签</a></nav><nav id="sub-nav"></nav></header><div class="outer"><section id="main"><div class="article-container"><article id="post-image-filters-by-canvas" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"> 用Canvas实现图片滤镜效果</h1></header><div class="article-entry typo" itemprop="articleBody"><h1 id="灰度效果"><a href="#灰度效果" class="headerlink" title="灰度效果"></a>灰度效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/gray.jpg" alt="图片过滤效果之灰度效果"></p><p> 算法及原理：<br></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">.299</span> * r + <span class="number">.587</span> * g + <span class="number">.114</span> * b;</span><br></pre></td></tr></table></figure><p></p><h1 id="视频效果"><a href="#视频效果" class="headerlink" title="视频效果"></a>视频效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/video.jpg" alt="图片过滤效果之视频效果"></p><h1 id="扩散效果（毛玻璃）"><a href="#扩散效果（毛玻璃）" class="headerlink" title="扩散效果（毛玻璃）"></a>扩散效果（毛玻璃）</h1><blockquote><p>原理：用当前点四周一定范围内任意一点的颜色来替代当前点颜色，最常用的是随机的采用相邻点进行替代。</p></blockquote><p><img src="https://summerandwinter.github.io/assets/images/filter/spread.jpg" alt="图片过滤效果之视频效果"></p><h1 id="连环画效果"><a href="#连环画效果" class="headerlink" title="连环画效果"></a>连环画效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/comic.jpg" alt="图片滤镜效果之连环画效果"></p><p> 原理：</p><blockquote><p>连环画的效果与图像灰度化后的效果相似,它们都是灰度图,但连环画增大了图像的对比度,使整体明暗效果更强.</p></blockquote><p> 算法:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">R = |g – b + g + r| * r / <span class="number">256</span> </span><br><span class="line">G = |b – g + b + r| * r / <span class="number">256</span>;</span><br><span class="line">B = |b – g + b + r | * g / <span class="number">256</span>;</span><br></pre></td></tr></table></figure><h1 id="怀旧效果"><a href="#怀旧效果" class="headerlink" title="怀旧效果"></a>怀旧效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/nostalgia.jpg" alt="图片滤镜效果之怀旧效果"><br> 首先对图像重新计算RGB值,计算公式如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dr=<span class="number">.393</span>*r+<span class="number">.769</span>*g+<span class="number">.189</span>*b; </span><br><span class="line"><span class="keyword">var</span> dg=<span class="number">.349</span>*r+<span class="number">.686</span>*g+<span class="number">.168</span>*b;</span><br><span class="line"><span class="keyword">var</span> db=<span class="number">.272</span>*r+<span class="number">.534</span>*g+<span class="number">.131</span>*b;</span><br></pre></td></tr></table></figure><p>对图像计算出来的新的RGB值根据随机权重与旧值混合，权重值公式如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scale=<span class="built_in">Math</span>.random()*<span class="number">0.5</span> + <span class="number">0.5</span>;</span><br></pre></td></tr></table></figure><p> 混合公式如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fr=scale*dr+(<span class="number">1</span>-scale)*r;</span><br></pre></td></tr></table></figure><h1 id="底片效果"><a href="#底片效果" class="headerlink" title="底片效果"></a>底片效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/negative.jpg" alt="图片滤镜效果之底片效果"><br> 算法原理：将当前像素点的RGB值分别与255之差后的值作为当前点的RGB值，即</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">R = <span class="number">255</span> – R；G = <span class="number">255</span> – G；B = <span class="number">255</span> – B；</span><br></pre></td></tr></table></figure><h1 id="黑白效果"><a href="#黑白效果" class="headerlink" title="黑白效果"></a>黑白效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/black.jpg" alt="图片过滤效果之黑白效果"><br> 算法及原理：</p><blockquote><p>求RGB平均值Avg ＝ (R + G + B) / 3，如果Avg &gt;= 100，则新的颜色值为R＝G＝B＝255；<br>如果Avg &lt; 100，则新的颜色值为R＝G＝B＝0；255就是白色，0就是黑色；<br>至于为什么用100作比较，这是一个经验值吧，设置为128也可以，可以根据效果来调整。</p></blockquote><h1 id="浮雕效果"><a href="#浮雕效果" class="headerlink" title="浮雕效果"></a>浮雕效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/cameo.jpg" alt="图片过滤效果之浮雕效果"></p><p> 算法及原理：</p><blockquote><p>用相邻点的RGB值减去当前点的RGB值并加上128作为新的RGB值。<br>由于图片中相邻点的颜色值是比较接近的，因此这样的算法处理之后，只有颜色的边沿区域，<br>也就是相邻颜色差异较大的部分的结果才会比较明显，而其他平滑区域则值都接近128左右，<br>也就是灰色，这样就具有了浮雕效果。<br>在实际的效果中，这样处理后，有些区域可能还是会有”彩色”的一些点或者条状痕迹，所以最好再对新的RGB值做一个灰度处理。</p></blockquote><h1 id="熔铸效果"><a href="#熔铸效果" class="headerlink" title="熔铸效果"></a>熔铸效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/casting.jpg" alt="图片滤镜效果之熔铸效果"></p><p> 算法及原理：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">r = r*<span class="number">128</span>/(g+b +<span class="number">1</span>);</span><br><span class="line">g = g*<span class="number">128</span>/(r+b +<span class="number">1</span>); </span><br><span class="line">b = b*<span class="number">128</span>/(g+r +<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h1 id="高斯模糊"><a href="#高斯模糊" class="headerlink" title="高斯模糊"></a>高斯模糊</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/gausian.jpg" alt="玻璃水滴效果"></p><h1 id="玻璃水滴效果"><a href="#玻璃水滴效果" class="headerlink" title="玻璃水滴效果"></a>玻璃水滴效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/cleanglass.jpg" alt="玻璃水滴效果"></p><p><a href="https://summerandwinter.github.io/lab/filters/cleanglass.hml" title="玻璃水滴效果示例">查看示例</a></p><h1 id="聚焦效果"><a href="#聚焦效果" class="headerlink" title="聚焦效果"></a>聚焦效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/focus.jpg" alt="聚焦效果"></p><p><a href="https://summerandwinter.github.io/lab/filters/focus.hml" title="聚焦效果示例">查看示例</a></p><h1 id="亮白"><a href="#亮白" class="headerlink" title="亮白"></a>亮白</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/bright.jpg" alt="高亮柔白"></p><h1 id="高亮柔白"><a href="#高亮柔白" class="headerlink" title="高亮柔白"></a>高亮柔白</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/softblow.jpg" alt="高亮柔白"></p><p><a href="https://summerandwinter.github.io/lab/filters/softblow.hml" title="高亮柔白效果示例">查看示例</a></p><h1 id="雾化效果"><a href="#雾化效果" class="headerlink" title="雾化效果"></a>雾化效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/mist.jpg" alt="雾化效果"></p><p><a href="https://summerandwinter.github.io/lab/filters/mist.hml" title="雾化效果示例">查看示例</a></p><h1 id="油画效果"><a href="#油画效果" class="headerlink" title="油画效果"></a>油画效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/oilpainting.jpg" alt="油画效果"></p><p> 算法及原理：</p><blockquote><p>用当前点四周一定范围内任意一点的颜色来替代当前点颜色，最常用的是随机的采用相邻点进行替代。</p></blockquote><p><a href="https://summerandwinter.github.io/lab/filters/oilpainting.hml" title="油画效果示例">查看示例</a></p><h1 id="素描"><a href="#素描" class="headerlink" title="素描"></a>素描</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/sketch.jpg" alt="素描效果"></p><h1 id="锐化"><a href="#锐化" class="headerlink" title="锐化"></a>锐化</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/sharp.jpg" alt="锐化效果"></p><p><a href="https://summerandwinter.github.io/lab/filters/sharp.hml" title="锐化效果示例">查看示例</a></p><h1 id="3D栅格效果"><a href="#3D栅格效果" class="headerlink" title="3D栅格效果"></a>3D栅格效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/threedgrid.jpg" alt="3D栅格效果"></p><p><a href="https://summerandwinter.github.io/lab/filters/threedgrid.hml" title="3D栅格效果示例">查看示例</a></p><h1 id="冰冻效果"><a href="#冰冻效果" class="headerlink" title="冰冻效果"></a>冰冻效果</h1><p><img src="https://summerandwinter.github.io/assets/images/filter/frozen.jpg" alt="冰冻效果"><br>算法及原理：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">r = (r-g-b)*<span class="number">3</span>/<span class="number">2</span>;</span><br><span class="line">g = (g-r-b)*<span class="number">3</span>/<span class="number">2</span>; </span><br><span class="line">b = (b-g-r)*<span class="number">3</span>/<span class="number">2</span>;</span><br></pre></td></tr></table></figure><h1 id="查看示例"><a href="#查看示例" class="headerlink" title="查看示例"></a>查看示例</h1><p>已经集成到博客的小工具里了，点<a href="https://summerandwinter.github.io/lab/filters/index.html" title="简易图片过滤效果工具">这里</a>查看效果。</p><h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="http://www.icodelogic.com/?p=575" title="灰度、黑白、底片、浮雕" target="_blank" rel="noopener">灰度、黑白、底片、浮雕</a></p><p><a href="http://blog.csdn.net/jia20003/article/details/9142111" title="老照片特效" target="_blank" rel="noopener">老照片特效</a></p><div class="end-of-file">END</div></div><footer class="article-footer"><ul class="article-meta"><li> <span class="label">发布:</span> <a href="/image-filters-by-canvas.html" class="article-date"><time datetime="2013-10-30T11:33:43.000Z" itemprop="datePublished">2013-10-30</time></a></li><li> <span class="label">分类:</span><div class="article-category"> <a class="article-category-link" href="/category/前端设计/">前端设计</a></div></li><li> <span class="label">标签:</span><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/Canvas/">Canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/HTML5/">HTML5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/图片/">图片</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/滤镜/">滤镜</a></li></ul></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"> <a href="/image-filters-by-canvas-gray.html" id="article-nav-newer" class="article-nav-link-wrap newer"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title"> 用Canvas实现图片滤镜效果详解之灰度效果</div></a> <a href="/create-magic-ascii-picture-by-javascript.html" id="article-nav-older" class="article-nav-link-wrap older"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">通过JavaScript把图片转化为字符画</div></a></nav></article><aside id="article-toc" role="navigation" class="article-toc"><div id="article-toc-inner"> <strong class="sidebar-title">目录</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#灰度效果"><span class="toc-text">灰度效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#视频效果"><span class="toc-text">视频效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#扩散效果（毛玻璃）"><span class="toc-text">扩散效果（毛玻璃）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#连环画效果"><span class="toc-text">连环画效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#怀旧效果"><span class="toc-text">怀旧效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#底片效果"><span class="toc-text">底片效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#黑白效果"><span class="toc-text">黑白效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#浮雕效果"><span class="toc-text">浮雕效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#熔铸效果"><span class="toc-text">熔铸效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#高斯模糊"><span class="toc-text">高斯模糊</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#玻璃水滴效果"><span class="toc-text">玻璃水滴效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#聚焦效果"><span class="toc-text">聚焦效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#亮白"><span class="toc-text">亮白</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#高亮柔白"><span class="toc-text">高亮柔白</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#雾化效果"><span class="toc-text">雾化效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#油画效果"><span class="toc-text">油画效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#素描"><span class="toc-text">素描</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#锐化"><span class="toc-text">锐化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3D栅格效果"><span class="toc-text">3D栅格效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#冰冻效果"><span class="toc-text">冰冻效果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#查看示例"><span class="toc-text">查看示例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文档"><span class="toc-text">参考文档</span></a></li></ol> <a href="#" id="article-toc-top">回到顶部</a></div></aside><section id="gitment_ccomments" class="comments"><div id="gitment_container"></div></section></div></section></div><footer id="footer" class="post-footer footer"><div id="footerContent" class="footer-content"><div class="end-of-file">Live Happy Love Hard</div></div></footer></div><script src="//cdn.jsdelivr.net/gh/summerandwinter/summerandwinter.github.io/js/gitment.js"></script><script>var date="Wed Oct 30 2013 11:33:43 GMT+0000",id=""+new Date(date).getTime(),gitment=new Gitment({id:id,owner:"summerandwinter",repo:"summerandwinter.github.io",oauth:{client_id:"7b432b7b46e71966fd88",client_secret:"2c697bec7b012bca975de41c87863d84086f8d81"}});gitment.render("gitment_container")</script><script src="//cdn.jsdelivr.net/gh/summerandwinter/summerandwinter.github.io/js/summer.js"></script><!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]--></div></body>