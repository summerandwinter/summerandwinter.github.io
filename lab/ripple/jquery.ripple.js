function WaveModule(t,n,r){var m=n.width,g=n.height,e=m*g,y=e,p=2*e,x=3*e,M=4*e,A=5*e,I=new t.Uint32Array(r),C=new t.Int32Array(r);function U(t){return t<-1610612736?-1610612736:1610612736<t?1610612736:t}return{iterate:function(){for(var t=0,n=0,r=0,e=0,a=0,i=0,o=0,u=0;u<4;u++){for(n=t=0;n<g;n++)for(r=0;r<m;r++)if(0!=n)if(n+1!=g)if(0!=r)if(r+1!=m){e=C[p+t],a=C[p+t-m],i=C[p+t+m];var f=((o=C[p+t-1])+C[p+t+1]>>1)-e,c=(a+i>>1)-e,h=C[M+t];h=U(h+=f>>1),h=U(h+=c>>1);var l=C[A+t];C[x+t]=U(l+U(e+h)),l-=l>>2,C[A+t]=l,h-=h>>7,C[M+t]=h,t++}else t++;else t++;else t++;else t++;var v=p;p=x,x=v}var d=t=0,s=0;for(n=0;n<g;n++)for(r=0;r<m;r++){var w=y+t;if(0<n&&n<g-1&&0<r&&r<m-1){if(a=C[p+t-m],i=C[p+t+m],o=C[p+t-1],s=n+(i-a>>12),(d=r+(C[p+t+1]-o>>12))<0){w=t++;continue}if(m<=d){w=t++;continue}if(s<0){w=t++;continue}if(g<=s){w=t++;continue}w=y+s*m+d}I[0+t]=I[w],t++}}}}function ripple(o,t){var u,f,a=o.getContext("2d"),n=new Image,i=0,c=0,h=null;function l(){var t=$.now();h.iterate();var n=$.now()-t;$("#benchmark").text("Time: "+n+" ms");var r=new Uint8ClampedArray(u,0,4*i*c),e=a.createImageData(c,i);e.data.set(r),a.putImageData(e,0,0),setTimeout(l,10)}function v(t,n,r){var e=t.getBoundingClientRect();return{x:Math.round(n-e.left*(t.width/e.width)),y:Math.round(r-e.top*(t.height/e.height))}}n.onload=function(){var t;c=n.width,i=n.height,o.width=c,o.height=i,a.drawImage(n,0,0);try{t=a.getImageData(0,0,c,i)}catch(t){return void window.alert("Aw, snap! Background lorempixel.com image violated Cross-Origin policy.")}a.clearRect(0,0,c,i),h=function(t,n,r){var e=4194304*Math.ceil(24*n*r/4194304);u=new ArrayBuffer(e);for(var a=new Uint8Array(t.buffer),i=new Uint8Array(u),o=0;o<4*n*r;o++)i[4*n*r+o]=a[o];return f=new Int32Array(u,20*n*r,n*r),new WaveModule(window,{width:n,height:r},u)}(t.data,c,i),setTimeout(l,10)},n.crossOrigin="Anonymous",n.src=t;for(var d=[],s=-11;s<=11;s++){var r=[];d.push(r);for(var w=-11;w<=11;w++){var e=Math.floor(2097152*Math.exp(-.2*(s*s+w*w)));r.push(e)}}function m(t,n){for(s=-11;s<=11;s++){var r=n+s;if(!(r<0||i<=r))for(w=-11;w<=11;w++){var e=t+w;e<0||c<=e||(f[r*c+e]=Math.max(f[r*c+e],d[s+11][w+11]))}}}var g=null,y=null;o.onmousedown=function(t){var n=v(o,t.clientX,t.clientY);g=n.x,y=n.y,m(n.x,n.y)},o.onmousemove=function(t){var n=v(o,t.clientX,t.clientY),r=n.x,e=n.y;if(null!==g&&null!==y){for(var a=Math.sqrt((n.x-g)*(n.x-g)+(n.y-y)*(n.y-y)),i=0;i<a;i++){m(Math.round(g+i/a*(r-g)),Math.round(y+i/a*(e-y)))}m(n.x,n.y),g=n.x,y=n.y}},o.onmouseover=o.onmouseout=o.onmouseup=function(t){y=g=null}}!function(i){i.fn.ripple=function(){var r=this,e=r.width(),a=r.height();this.filter("img").each(function(t){var n=i("<canvas/>");r.replaceWith(function(){return n.attr("width",e),n.attr("height",a),n}),ripple(n[0],r.attr("src"))})}}(jQuery);