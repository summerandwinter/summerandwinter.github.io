var gardenCtx,gardenCanvas,$garden,garden,$window=$(window),clientWidth=$(window).width(),clientHeight=$(window).height();function getHeartPoint(t){var e=t/Math.PI,a=16*Math.pow(Math.sin(e),3)*19.5,n=-20*(13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e));return new Array(offsetX+a,offsetY+n)}function startHeartAnimation(){var o=10,i=new Array,s=setInterval(function(){for(var t=getHeartPoint(o),e=!0,a=0;a<i.length;a++){var n=i[a];if(Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))<1.3*Garden.options.bloomRadius.max){e=!1;break}}e&&(i.push(t),garden.createRandomBloom(t[0],t[1])),30<=o?(clearInterval(s),showMessages()):o+=.2},50)}function timeElapse(t){var e=Date(),a=(Date.parse(e)-Date.parse(t))/1e3,n=Math.floor(a/86400);a%=86400;var o=Math.floor(a/3600);o<10&&(o="0"+o),a%=3600;var i=Math.floor(a/60);i<10&&(i="0"+i),(a%=60)<10&&(a="0"+a);var s='<span class="digit">'+n+'</span> days <span class="digit">'+o+'</span> hours <span class="digit">'+i+'</span> minutes <span class="digit">'+a+"</span> seconds";$("#elapseClock").html(s)}function showMessages(){adjustWordsPosition(),$("#messages").fadeIn(5e3,function(){showLoveU()})}function adjustWordsPosition(){$("#words").css("position","absolute"),$("#words").css("top",$("#garden").position().top+145),$("#words").css("left",$("#garden").position().left+70)}function adjustCodePosition(){$("#code").css("margin-top",0)}function showLoveU(){$("#loveu").fadeIn(3e3)}function audioSupported(){return void 0!==document.createElement("audio").src}function audioPlay(){audioSupported()&&document.getElementById("myaudio").play()}function goToFirst(){audioSupported()&&(document.getElementById("myaudio").currentTime=0,document.getElementById("myaudio").play())}function audioPause(){audioSupported()&&document.getElementById("myaudio").pause()}$(function(){$loveHeart=$("#loveHeart");$loveHeart.width(),$loveHeart.height();$garden=$("#garden"),(gardenCanvas=$garden[0]).width=$("#loveHeart").width(),gardenCanvas.height=$("#loveHeart").height(),(gardenCtx=gardenCanvas.getContext("2d")).globalCompositeOperation="lighter",garden=new Garden(gardenCtx,gardenCanvas),$("#content").css("width",$loveHeart.width()+$("#code").width()),$("#content").css("height",Math.max($loveHeart.height(),$("#code").height())),$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/2,10)),$("#content").css("margin-left",Math.max(($window.width()-$("#content").width())/2,10)),setInterval(function(){garden.render()},Garden.options.growSpeed)}),$(window).resize(function(){var t=$(window).width(),e=$(window).height();t!=clientWidth&&e!=clientHeight&&location.replace(location)}),function(o){o.fn.typewriter=function(){return this.each(function(){var t=o(this),e=t.html(),a=0;e=e.replace(/[ ]+/g," "),t.html(""),audioPlay();var n=setInterval(function(){if("<"==e.substr(a,1)){audioPause();a=e.indexOf(">",a)+1}else audioPlay(),a++,t.html(e.substring(0,a)+(1&a?"_":""));a>=e.length&&(audioPause(),clearInterval(n))},150)}),this}}(jQuery);