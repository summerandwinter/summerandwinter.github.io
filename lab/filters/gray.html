<html><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><head><script>window.onload=function(){document.getElementById("cv").getContext("2d");var g=document.getElementById("myCanvas"),i=g.getContext("2d"),o=new Image;o.src="original.jpg",o.onload=function(){g.width=o.width,g.height=o.height,i.drawImage(o,0,0);for(var t=i.getImageData(0,0,g.width,g.height),a=0;a<t.width;a++)for(var d=0;d<t.height;d++){var e=4*(a+d*t.width),n=.299*t.data[e+0]+.587*t.data[e+1]+.114*t.data[e+2];t.data[e+0]=n,t.data[e+1]=n,t.data[e+2]=n,t.data[e+3]=255}i.putImageData(t,0,0)}}</script></head><body><p>原图</p> <img src="original.jpg"><p>效果图</p><canvas id="myCanvas">Gray Filter</canvas><canvas id="cv">Gray Filter</canvas></body></html>