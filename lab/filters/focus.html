<html><head><script>window.onload=function(){var I=document.getElementById("myCanvas"),c=I.getContext("2d"),l=new Image;l.src="original.jpg",l.onload=function(){I.width=l.width,I.height=l.height,c.drawImage(l,0,0);for(var t=c.getImageData(0,0,I.width,I.height),a=I.width>I.height?32768*I.height/I.width:32768*I.width/I.height,h=I.width>>1,i=I.height>>1,d=h*h+i*i,e=.5*d,g=0;g<t.width;g++)for(var w=0;w<t.height;w++){var n=4*(g+w*t.width),o=(t.data[n+0],t.data[n+1],t.data[n+2],h-g),r=i-w;if(t.width>t.height?r=r*a>>14:o=o*a>>14,e<o*o+r*r){var m=g+12,v=w+12;m>=t.width&&(m=t.width-1),v>=t.height&&(v=t.height-1);var f=4*(m+v*t.width);t.data[n+0]=t.data[f+0],t.data[n+1]=t.data[f+1],t.data[n+2]=t.data[f+2]}}c.putImageData(t,0,0)}}</script></head><p>原图</p> <img src="original.jpg"><p>效果图</p><canvas id="myCanvas">Gray Filter</canvas><canvas id="cv">Gray Filter</canvas></html>