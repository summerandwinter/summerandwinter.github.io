<!doctype html><html><head><script>window.onload=function(){var I=document.getElementById("myCanvas"),c=I.getContext("2d"),u=new Image;u.src="original.jpg",u.onload=function(){I.width=u.width,I.height=u.height,c.drawImage(u,0,0);for(var t=c.getImageData(0,0,I.width,I.height),a=I.width>I.height?32768*I.height/I.width:32768*I.width/I.height,h=I.width>>1,d=I.height>>1,i=h*h+d*d,e=.5*i,g=0;g<t.width;g++)for(var w=0;w<t.height;w++){var o=4*(g+w*t.width),n=(t.data[o+0],t.data[o+1],t.data[o+2],h-g),r=d-w;if(t.width>t.height?r=r*a>>14:n=n*a>>14,e<n*n+r*r){var m=Math.floor(123456*Math.random()),v=g+m%19,f=w+m%19;v>=t.width&&(v=t.width-1),f>=t.height&&(f=t.height-1);var l=4*(v+f*t.width);t.data[o+0]=t.data[l+0],t.data[o+1]=t.data[l+1],t.data[o+2]=t.data[l+2]}}c.putImageData(t,0,0)}}</script></head><p>原图</p> <img src="original.jpg"><p>效果图</p><canvas id="myCanvas">Gray Filter</canvas><canvas id="cv">Gray Filter</canvas></html>