<html><head><script>window.onload=function(){var r=document.getElementById("myCanvas"),w=r.getContext("2d"),m=new Image;m.src="original.jpg",m.onload=function(){r.width=m.width,r.height=m.height,w.drawImage(m,0,0);for(var a=w.getImageData(0,0,r.width,r.height),t=20,d=0;d<a.width;d++)for(var e=0;e<a.height;e++){var i=4*(d+e*a.width),g=a.data[i+0],h=a.data[i+1],n=a.data[i+2],o=0;(e-1)%t==0&&0<d%t&&0<(d+1)%t?o=-10:(e+2)%t==0&&0<d%t&&0<(d+1)%t?o=10:(d-1)%t==0&&0<e%t&&0<(e+1)%t?o=10:(d+2)%t==0&&0<e%t&&0<(e+1)%t&&(o=-10),a.data[i+0]=g+o,a.data[i+1]=h+o,a.data[i+2]=n+o,a.data[i+3]=255}w.putImageData(a,0,0)}}</script></head><p>原图</p> <img src="original.jpg"><p>效果图</p><canvas id="myCanvas">Gray Filter</canvas><canvas id="cv">Gray Filter</canvas></html>