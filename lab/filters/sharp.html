<html><head><script>window.onload=function(){var c=document.getElementById("myCanvas"),l=c.getContext("2d"),u=new Image;u.src="original.jpg",u.onload=function(){c.width=u.width,c.height=u.height,l.drawImage(u,0,0);for(var a=l.getImageData(0,0,c.width,c.height),t=[-1,-1,-1,-1,9,-1,-1,-1,-1],d=0;d<a.width;d++)for(var e=0;e<a.height;e++){for(var i=0,h=0,o=0,r=0,g=-1;g<=1;g++)for(var n=-1;n<=1;n++){var w=4*(d+n+(e+g)*a.width),v=a.data[w+0],m=a.data[w+1],f=a.data[w+2];i+=v*t[r],h+=m*t[r],o+=f*t[r],r++}var I=4*(d-1+(e-1)*a.width);a.data[I+0]=i,a.data[I+1]=h,a.data[I+2]=o}l.putImageData(a,0,0)}}</script></head><p>原图</p> <img src="original.jpg"><p>效果图</p><canvas id="myCanvas">Gray Filter</canvas><canvas id="cv">Gray Filter</canvas></html>