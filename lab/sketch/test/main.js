!function(){function e(t){return document.getElementById(t)}testDiscolor=function(){for(var t=[],a=0;a<16;a++)t[a]=Math.round(255*Math.random());console.log(JSON.stringify(t)),discolor(t),console.log(t)},testCaseGaussBlur=function(){for(var t=[],a=0;a<100;a++)t[a]=Math.round(255*Math.random());console.log(JSON.stringify(t)),gaussBlur(t,5,5),console.log(t)},testCase=function(){var o=e("source"),n=o.getContext("2d"),i=e("target").getContext("2d"),a=e("tools");n.font="30px sans-serif",n.fillText("Drop a picture to here",80,100),i.font="30px sans-serif",i.fillText("You will see the result in here",20,100),o.addEventListener("drop",function(t){t.preventDefault();var a=t.dataTransfer.files[0],e=new FileReader;e.onload=function(t){var a=new Image;a.onload=function(){n.clearRect(0,0,o.width,o.height),n.drawImage(a,0,0)},a.src=t.target.result},e.onerror=function(t){alert(t.target.error.code)},e.readAsDataURL(a)}),a.addEventListener("click",function(a){if("INPUT"===a.target.tagName){var e=a.target.value,r=n.getImageData(0,0,o.width,o.height);switch(e){case"discolor":sketching.discolor(r.data),i.putImageData(r,0,0);break;case"invert":sketching.invert(r.data),i.putImageData(r,0,0);break;case"gaussBlur":sketching.gaussBlur(r.data,r.width,r.height),i.putImageData(r,0,0);break;case"dodgeColor":break;case"sketch":imgData2=n.getImageData(0,0,o.width,o.height),sketching.discolor(imgData2.data),t=+new Date,data=Array.prototype.slice.call(imgData2.data,0),console.log(+new Date-t),sketching.invert(data),sketching.gaussBlur(data,imgData2.width,imgData2.height,5),sketching.dodgeColor(imgData2.data,data),i.putImageData(imgData2,0,0)}}})},testCase()}();