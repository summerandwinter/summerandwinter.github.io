!function(){var n,e=window.$||function(e){return document.getElementById(e)},o=function(e){e?(t.classList.add("btn-primary"),t.disabled=!1):(t.classList.remove("btn-primary"),t.disabled=!0)},r=function(i){o(!1),setTimeout(function(){var e,t,a,n,r;e=i.width,t=i.height,.75<=(a=t/e)&&480<=t&&(e=(t=480)/a),a<=.75&&640<=e&&(t=(e=640)*a),d.width=e,d.height=t,l.clearRect(0,0,d.width,d.height),l.drawImage(i,0,0,d.width,d.height),n=Math.abs(c.value||5),r=l.getImageData(0,0,d.width,d.height),sk.sketch(r,n),l.putImageData(r,0,0),s.href=d.toDataURL(),o(!0)},0)},d=e("canvas"),t=e("action"),s=e("download"),c=e("strength"),i=e("dropper"),l=d.getContext("2d");i.addEventListener("drop",function(e){e.preventDefault(),i.innerHTML="";var t=e.dataTransfer.files[0],a=new FileReader;a.onload=function(e){var t=new Image;t.onload=function(){r(n=this)},t.src=e.target.result},a.onerror=function(e){var t=e.target.error.code;2===t?alert("please don't open this page using protocol fill:///"):alert("error code: "+t)},a.readAsDataURL(t)},!1),i.addEventListener("dragover",function(e){e.preventDefault()},!1),i.addEventListener("dragenter",function(e){e.preventDefault()},!1),t.addEventListener("click",function(e){n?r(n):alert("please select a picture first")},!1)}();