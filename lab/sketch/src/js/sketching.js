!function(){function f(t){for(var r,n=0,o=t.length;n<o;n+=4)r=.299*t[n]+.587*t[n+1]+.114*t[n+2],t[n]=t[n+1]=t[n+2]=r;return t}function h(t){for(var r=0,n=t.length;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2];return t}function c(t,r){for(var n=0,o=t.length;n<o;n+=4)t[n]=t[n]+t[n]*r[n]/(255-r[n]),t[n+1]=t[n+1]+t[n+1]*r[n+1]/(255-r[n+1]),t[n+2]=t[n+2]+t[n+2]*r[n+2]/(255-r[n+2]);return t}function u(t,r,n,o,e){var a,i,f,h,c,u,d,g,l,s,w=[],v=0;for(o=Math.floor(o)||3,e=e||o/3,u=1/(Math.sqrt(2*Math.PI)*e),c=-1/(2*e*e),d=0,a=-o;a<=o;a++,d++)h=u*Math.exp(c*a*a),v+=w[d]=h;for(d=0,s=w.length;d<s;d++)w[d]/=v;for(i=0;i<n;i++)for(a=0;a<r;a++){for(f=h=c=u=0,v=0,g=-o;g<=o;g++)0<=(l=a+g)&&l<r&&(f+=t[d=4*(i*r+l)]*w[g+o],h+=t[d+1]*w[g+o],c+=t[d+2]*w[g+o],v+=w[g+o]);t[d=4*(i*r+a)]=f/v,t[d+1]=h/v,t[d+2]=c/v}for(a=0;a<r;a++)for(i=0;i<n;i++){for(f=h=c=u=0,v=0,g=-o;g<=o;g++)0<=(l=i+g)&&l<n&&(f+=t[d=4*(l*r+a)]*w[g+o],h+=t[d+1]*w[g+o],c+=t[d+2]*w[g+o],v+=w[g+o]);t[d=4*(i*r+a)]=f/v,t[d+1]=h/v,t[d+2]=c/v}return t}var d=document.createElement("canvas"),g=d.getContext("2d");window.sketching={discolor:f,invert:h,dodgeColor:c,gaussBlur:u,sketch:function(t,r,n){var o,e=t.data,a=t.width,i=t.height;return f(e),d.width=a,d.height=i,g.clearRect(0,0,a,i),g.putImageData(t,0,0),h(o=g.getImageData(0,0,a,i).data),u(o,a,i,r,n),c(e,o),e}},void 0===window.sk&&(window.sk=window.sketching)}();