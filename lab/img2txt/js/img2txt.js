var cv=document.getElementById("cv"),c=cv.getContext("2d"),txtDiv=document.getElementById("txt"),fileBtn=document.getElementById("up-button"),img=new Image;function toText(t){return t<=30?"8":30<t&&t<=60?"&":60<t&&t<=120?"$":120<t&&t<=150?"*":150<t&&t<=180?"o":180<t&&t<=210?"!":210<t&&t<=240?";":"."}function getGray(t,e,i){return.299*t+.578*e+.114*i}function init(){txtDiv.style.width=img.width+"px",cv.width=img.width,cv.height=img.height,c.drawImage(img,0,0);var t=c.getImageData(0,0,img.width,img.height),e=t.data,i=t.width,n=t.height,g="";for(h=0;h<n;h+=12){var a="<p>";for(w=0;w<i;w+=6){var m=4*(w+i*h);a+=toText(getGray(e[m+0],e[m+1],e[m+2]))}g+=a+="</p>"}txtDiv.innerHTML=g}function getImg(t){var e=new FileReader;e.readAsDataURL(fileBtn.files[0]),e.onload=function(){img.src=e.result}}img.src="abn.jpg",img.onload=init,fileBtn.onchange=getImg;