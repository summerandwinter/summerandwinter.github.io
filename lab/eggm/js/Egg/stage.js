function Stage(M){var u=getRes("stage_bg"),A=getRes("coin");this.stageW=M.canvas.width,this.stageH=M.canvas.height,this.width=250,this.height=250,this.x=(this.stageW-this.width)/2,this.y=2*(this.stageH-this.height)/3,this.coinX=(this.stageW-A.width)/2,this.coinY=(this.stageH-A.height)/2+100,this.wSize=10,this.hSize=10,this.spacing=5,this.rectWidth=(this.width+this.spacing)/this.wSize-this.spacing,this.rectHeight=(this.height+this.spacing)/this.hSize-this.spacing,this.radius=20,this.rotationX=this.stageW/2,this.rotationY=2*this.stageH/3,this.rotationAngle=0,this.egdeCount=30,this.egdePerAngle=360/this.egdeCount,this.egde2count=15,this.egde2length=2*this.stageW/3,this.egde2width=50,this.egde2PerAngle=360/this.egde2count,this.egde3width=100,this.draw=function(){var t,i;M.drawImage(u.image,0,0,this.stageW,this.stageH),M.save(),M.beginPath(),M.fillStyle="rgba(251, 197, 77, 0.5)";for(var e=0;e<this.egde2count;e++){var h=angle2Degree(e*this.egde2PerAngle+this.rotationAngle),s=this.rotationX+this.radius*Math.cos(h),g=this.rotationY+this.radius*Math.sin(h),a=this.egde2length,n=angle2Degree((e+.5)*this.egde2PerAngle+this.rotationAngle),o=this.rotationX+a*Math.cos(n),d=this.rotationY+a*Math.sin(n),r=o+this.egde3width/2*Math.sin(n),l=d-this.egde3width/2*Math.cos(n),c=o-this.egde3width/2*Math.sin(n),w=d+this.egde3width/2*Math.cos(n);0==e?(t=s,i=g,M.moveTo(s,g)):M.lineTo(s,g),M.lineTo(r,l),M.lineTo(c,w)}M.lineTo(t,i),M.closePath(),M.fill(),M.beginPath(),M.fillStyle="rgba( 229, 129, 45, 0.5 )";for(e=M.lineWidth=0;e<this.egde2count;e++){h=angle2Degree(e*this.egde2PerAngle+this.rotationAngle),s=this.rotationX+this.radius*Math.cos(h),g=this.rotationY+this.radius*Math.sin(h),a=this.egde2length,n=angle2Degree((e+.5)*this.egde2PerAngle+this.rotationAngle),o=this.rotationX+a*Math.cos(n),d=this.rotationY+a*Math.sin(n),r=o+this.egde2width/2*Math.sin(n),l=d-this.egde2width/2*Math.cos(n),c=o-this.egde2width/2*Math.sin(n),w=d+this.egde2width/2*Math.cos(n);0==e?(t=s,i=g,M.moveTo(s,g)):M.lineTo(s,g),M.lineTo(r,l),M.lineTo(c,w)}M.lineTo(t,i),M.closePath(),M.fill(),M.restore(),M.drawImage(A.image,this.coinX,this.coinY,A.width,A.height)},this.update=function(){this.rotationAngle+=.5,this.rotationAngle=this.rotationAngle%360}}