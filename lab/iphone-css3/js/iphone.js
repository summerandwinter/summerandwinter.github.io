var letters_interval,TIME=400;$(document).ready(function(){iphone.init()}),iphone={slide_started:!1,letter_animate_time:50,panels_animate_time:400,status:"lock",voice_off:!0,volume:.5,iconsDefaultPosition:{},iconsOutPosition:{},color:"#000",init:function(){switch(iphone.slideInitiate(),iphone.soundFix(),$("#iphone_home_button").click(function(){"off"==iphone.status&&iphone.turnOn()}),iphone.prepareTextAnimate(),iphone.startTextAnimate(),iphone.prepareIcons(),$("#iphone_power_button").click(function(){switch(iphone.status){case"off":iphone.turnOn();break;case"lock":case"unlock":iphone.turnOff()}}),iphone.timeUpdate(),iphone.status){case"off":iphone.turnOff();break;case"lock":iphone.lock();break;case"unlock":iphone.unlock()}setTimeout(function(){iphone.alert()},1e4)},slideInitiate:function(){iphone.is_mobile()?$("#iphone_slider").bind("touchstart",function(e){e.preventDefault();var o=e.originalEvent,s=this,a=$(this).offset();a.width=$(this).width(),a.height=$(this).height(),a.css_left=parseInt($(this).css("left")),mouse_position={x:o.changedTouches[0].pageX-a.left},slide_area_width=parseInt($("#iphone_unlock").width()),slider_left=parseInt($("#iphone_slider").css("left")),$(document).bind("touchmove",function(e){var t=o.changedTouches[0].pageX-a.left,n={left:a.css_left+t-mouse_position.x};n.left=n.left>slide_area_width-a.width-5?slide_area_width-a.width-5:n.left,n.left=n.left<slider_left?slider_left:n.left;var i=(slide_area_width-3*n.left)/slide_area_width;$("#iphone_slide2unlock").css({opacity:i},TIME/2),$(s).css(n)})}).bind("touchend",function(){$(document).unbind("touchmove"),iphone.endSlide()}):($("#iphone_slider").mousedown(function(e){e.preventDefault();var o=this,s=$(this).offset();s.width=$(this).width(),s.height=$(this).height(),s.css_left=parseInt($(this).css("left")),mouse_position={x:e.pageX-s.left},slide_area_width=parseInt($("#iphone_unlock").width()),slider_left=parseInt($("#iphone_slider").css("left")),$(document).mousemove(function(e){iphone.slide_started=!0;var t=e.pageX-s.left,n={left:s.css_left+t-mouse_position.x};n.left=n.left>slide_area_width-s.width-5?slide_area_width-s.width-5:n.left,n.left=n.left<slider_left?slider_left:n.left;var i=(slide_area_width-3*n.left)/slide_area_width;$("#iphone_slide2unlock").css({opacity:i},TIME/2),$(o).css(n)})}),$(document).mouseup(function(){iphone.slide_started&&($(document).unbind("mousemove"),iphone.endSlide(),iphone.slide_started=!1)}))},endSlide:function(){var e=parseInt($("#iphone_slider").css("left"));if(e>parseInt($("#iphone_unlock").width())-parseInt($("#iphone_slider").width())-20)iphone.unlock();else{var t=e/(parseInt($("#iphone_unlock").width())-parseInt($("#iphone_slider").width())-20);$("#iphone_slider").animate({left:"0"},TIME*t*2/3),$("#iphone_slide2unlock").stop().animate({opacity:"1"},TIME*t*2/3)}},turnOn:function(){"off"==iphone.status&&(iphone.status="lock",$(".iphone_display").removeClass("off"),$("#iphone_headline").children(".iphone_lock").show(),$("#iphone_headline_clock").hide(),$("#iphone_slider").css({left:"0"}),$("#iphone_slide2unlock").css({opacity:"1"}),$("#iphone_headline").css({top:"0"}),$("#iphone_lock_header").css({top:"20px"}),$("#iphone_lock_footer").css({bottom:"0"}),$("#iphone_dock").css({bottom:"-80px"}),iphone.hideIcons(),iphone.updateStatus())},turnOff:function(){iphone.soundLock(),iphone.status="off",$(".iphone_display").addClass("off"),$("#iphone_headline").css({top:"-20px"}),$("#iphone_lock_header").css({top:"-113px"}),$("#iphone_lock_footer").css({bottom:"-97px"}),$("#iphone_dock").css({bottom:"-80px"}),iphone.hideIcons(),iphone.updateStatus(),iphone.quick_hide_alert()},lock:function(){iphone.status="lock",$(".iphone_display").removeClass("off"),$("#iphone_headline").children(".iphone_lock").show(),$("#iphone_headline_clock").hide(),$("#iphone_slider").css({left:"0"}),$("#iphone_slide2unlock").css({opacity:"1"}),$("#iphone_headline").stop().animate({top:"0"},iphone.panels_animate_time),$("#iphone_lock_header").stop().animate({top:"20"},iphone.panels_animate_time),$("#iphone_lock_footer").stop().animate({bottom:"0"},iphone.panels_animate_time),$("#iphone_dock").stop().animate({bottom:"-80"},iphone.panels_animate_time),iphone.animateHideIcons(),iphone.updateStatus()},unlock:function(){iphone.soundUnlock(),iphone.status="unlock",$(".iphone_display").removeClass("off"),$("#iphone_headline").animate({top:"0"},iphone.panels_animate_time),$("#iphone_headline").children(".iphone_lock").hide(),$("#iphone_headline_clock").show(),$("#iphone_lock_header").animate({top:"-113"},iphone.panels_animate_time),$("#iphone_lock_footer").animate({bottom:"-97"},iphone.panels_animate_time),$("#iphone_dock").stop().animate({bottom:"4"},iphone.panels_animate_time),iphone.showIcons(),iphone.updateStatus()},alert:function(e){null!=e&&$("#iphone_alert .text").html(e);$("#iphone_alert").css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)","-webkit-transition":"all 0.3s","-moz-transition":"all 0.3s","-ms-transition":"all 0.3s","-o-transition":"all 0.3s",transition:"all 0.3s"})},hide_alert:function(){$("#iphone_alert").css({opacity:"0","-webkit-transition":"all 0.3s","-moz-transition":"all 0.3s","-ms-transition":"all 0.3s","-o-transition":"all 0.3s",transition:"all 0.3s"}),setTimeout(function(){iphone.quick_hide_alert()},300)},quick_hide_alert:function(){properties={opacity:"1","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)",transform:"scale(0)","-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none",transition:"none"},$("#iphone_alert").css(properties)},showIcons:function(){for(var e=$("#iphone_icons_containter").children(".icon"),t=0;t<e.length;t++)$(e[t]).stop().animate({left:iphone.iconsDefaultPosition[t].left,top:iphone.iconsDefaultPosition[t].top},iphone.panels_animate_time)},hideIcons:function(){for(var e=$("#iphone_icons_containter").children(".icon"),t=0;t<e.length;t++)$(e[t]).css({left:iphone.iconsOutPosition[t].left,top:iphone.iconsOutPosition[t].top})},animateHideIcons:function(){for(var e=$("#iphone_icons_containter").children(".icon"),t=0;t<e.length;t++)$(e[t]).stop().animate({left:iphone.iconsOutPosition[t].left,top:iphone.iconsOutPosition[t].top},iphone.panels_animate_time)},prepareIcons:function(){for(var e=$("#iphone_icons_containter").children(".icon"),t=0;t<e.length;t++){iphone.iconsDefaultPosition[t]={},iphone.iconsOutPosition[t]={};var n=$(e[t]).css("left");n=n.replace(new RegExp("px","g"),"");var i=$(e[t]).css("top");i=i.replace(new RegExp("px","g"),""),iphone.iconsDefaultPosition[t].left=parseInt(n),iphone.iconsDefaultPosition[t].top=parseInt(i),0!=t&&1!=t&&4!=t&&5!=t||(iphone.iconsOutPosition[t].left=parseInt(n)-200,iphone.iconsOutPosition[t].top=parseInt(i)-200),2!=t&&3!=t&&6!=t&&7!=t||(iphone.iconsOutPosition[t].left=parseInt(n)+200,iphone.iconsOutPosition[t].top=parseInt(i)-200),8!=t&&9!=t&&12!=t&&13!=t||(iphone.iconsOutPosition[t].left=parseInt(n)-200,iphone.iconsOutPosition[t].top=parseInt(i)+200),10!=t&&11!=t&&14!=t&&15!=t||(iphone.iconsOutPosition[t].left=parseInt(n)+200,iphone.iconsOutPosition[t].top=parseInt(i)+200),$(e[t]).css({left:iphone.iconsOutPosition[t].left,top:iphone.iconsOutPosition[t].top})}},updateStatus:function(){var e="off"==iphone.status?"turned off":"lock"==iphone.status?"turned on and locked":"turned on and unlocked";$("#current_status").html(e)},timeUpdate:function(){var e=new Date,t=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),n=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),o=e.getHours()<10?"0"+e.getHours():e.getHours();$("#iphone_lock_time").html(o+"<span>:</span>"+i),$("#iphone_headline_clock").html(o+":"+i),$("#iphone_lock_date").html(t[e.getDay()]+", "+n[e.getMonth()]+" "+e.getDate()),$("#iphone_icon_day").html(t[e.getDay()]),$("#iphone_icon_day_num").html(e.getDate()),setTimeout("iphone.timeUpdate()",1e3*(60-e.getSeconds()))},stopTextAnimate:function(){iphone.is_mobile()||clearInterval(letters_interval)},startTextAnimate:function(){iphone.is_mobile()||iphone.animateLetters()},prepareTextAnimate:function(){for(var e=$("#iphone_slide2unlock").html(),t="",n=0;n<e.length;n++)t+='<span style="opacity:0.3">'+e.charAt(n)+"</span>";$("#iphone_slide2unlock").html(t);var i=$("#iphone_slide2unlock").children("span");for(n=0;n<i.length;n++)$(i[n]).attr("id","spans_"+n)},animateLetters:function(){setTimeout(function(){iphone.animateCicle()},iphone.pannels_animate_time),letters_interval=setInterval(function(){iphone.animateCicle()},2500)},animateCicle:function(){for(var e=0;e<15;++e)!function(e){setTimeout(function(){$("#spans_"+e).stop().animate({opacity:"1"},iphone.letter_animate_time,function(){setTimeout(function(){$("#spans_"+e).stop().animate({opacity:"0.3"},iphone.letter_animate_time)},4*iphone.letter_animate_time)})},e*iphone.letter_animate_time*1.2)}(e)},soundFix:function(){if(!iphone.is_mobile());},soundLock:function(){if(!iphone.is_mobile()){var e="soundLock";document.getElementById(e).pause(),document.getElementById(e).currentTime=0,document.getElementById(e).volume=iphone.volume,document.getElementById(e).play()}},soundUnlock:function(){if(!iphone.is_mobile()){var e="soundUnlock";document.getElementById(e).volume=.3,document.getElementById(e).pause(),document.getElementById(e).currentTime=0,document.getElementById(e).volume=iphone.volume,document.getElementById(e).play()}},is_mobile:function(){return-1!=navigator.userAgent.toString().toLowerCase().indexOf("mobile")}};